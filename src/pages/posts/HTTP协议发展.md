---
layout: ../../layouts/MarkdownPostLayout.astro
title: 'HTTP 协议发展'
pubDate: 2024-07-01
description: 'HTTP 协议的发展历程'
tags: ["计算机网络"]
---
### HTTP/1.1
#### 长连接
通过 Connection: keep-alive 开启（默认开启）
建立 TCP 连接之后，浏览器会保持 TCP 连接，即可以在单次连接中执行多个请求，从而减少了每次请求都需要重新进行 TCP 连接的建立以及断开
单一域名，最多同时保持 6 个 TCP 连接
> 可以通过域名分片的方式来增加 TCP 连接的个数
#### 队头阻塞
HTTP 的请求是队列的形式，即每个请求都需要等待前一个请求完毕才可以进行，所以，当队列头部的请求没有成功响应的时候，后续的请求也就无法开始，从而阻塞了整个队列
### HTTP/2
#### 单 TCP 连接
HTTP2 中，单一域名仅建立一个 TCP 连接
#### 多路复用
采用二进制分帧的方式，将 HTTP 数据包进行拆分，通过 id 进行标识以及连接，帧会在流中进行传输，一个 TCP 连接中可以有多个流，从而在单一 TCP 连接中可以并行发送多个请求
#### HPACK 算法
用于对 HTTP 的头部进行压缩
客户端以及服务端共同维护一份静态字典以及动态字典，如下表所示
```txt
          +-------+-----------------------------+---------------+
          | Index | Header Name                 | Header Value  |
          +-------+-----------------------------+---------------+
          | 1     | :authority                  |               |
          | 2     | :method                     | GET           |
          | 3     | :method                     | POST          |
          | 4     | :path                       | /             |
          | 5     | :path                       | /index.html   |
          | 6     | :scheme                     | http          |
          | 7     | :scheme                     | https         |
          | 8     | :status                     | 200           |
          | 9     | :status                     | 204           |

```
即用更短的字符来存储常用的 HTTP 头部字段，从而减少 HTTP 头部的大小
#### 服务端推送
服务端在客户端请求之后，主动发送请求之外的其余资源，以减少客户端需要的请求次数
1. 客户端请求 HTML 文件
2. 服务端发送 PUSH_PROMISE 帧，告知客户端需要发送多个资源
3. 客户端收到特殊帧，为资源预留空间
4. 服务端发送 HTML 文件，之后推送其他资源
5. 客户端直接使用服务端推送的资源，而无需再发送额外的请求
### HTTP/3
使用 [QUIC](QUIC协议) 协议  ，解决了 TCP 队头阻塞的问题
